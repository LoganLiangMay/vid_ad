(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,64311,(e,s,a)=>{s.exports=e.r(28735)},35474,e=>{"use strict";var s=e.i(89589),a=e.i(59694),t=e.i(64311);e.i(92923);var l=e.i(38675),r=e.i(39555);function i({state:t,updateState:i,onNext:c}){let[o,d]=(0,a.useState)([]),[n,x]=(0,a.useState)([]),[m,u]=(0,a.useState)(!0),[p,h]=(0,a.useState)(!1),[g,b]=(0,a.useState)(null),[v,y]=(0,a.useState)(""),[j,N]=(0,a.useState)(!1);(0,a.useEffect)(()=>{f()},[]);let f=async()=>{try{u(!0);let e=(0,l.httpsCallable)(r.functions,"getReplicateDefaultVoices"),s=(await e()).data;s.success&&d(s.voices||[]);let a=(0,l.httpsCallable)(r.functions,"getUserClonedVoices"),t=(await a()).data;t.success&&x(t.voices||[])}catch(e){console.error("Error loading voices:",e)}finally{u(!1)}},w=e=>{i({selectedVoiceType:e,selectedVoiceId:null,clonedVoiceName:null})},V=async()=>{if(!g||!v.trim())return void alert("Please provide an audio file and voice name");if(0===v.trim().length||v.length>50)return void alert("Voice name must be between 1 and 50 characters");try{h(!0),N(!0);let{getStorage:s,ref:a,uploadBytes:t,getDownloadURL:c}=await e.A(23223),{app:o}=await e.A(99259),d=s(o),n=a(d,`voice-clones/${Date.now()}_${g.name}`);await t(n,g);let x=await c(n),m=(0,l.httpsCallable)(r.functions,"cloneVoice"),u=(await m({audioUrl:x,voiceName:v.trim()})).data;u.success&&(i({selectedVoiceType:"cloned",selectedVoiceId:u.voiceId,clonedVoiceName:u.voiceName}),await f(),b(null),y(""),N(!1))}catch(e){console.error("Error cloning voice:",e),alert(e.message||"Failed to clone voice. Please try again."),N(!1)}finally{h(!1)}};return m?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Select Voice"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Choose a default voice or clone your own voice"}),(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,s.jsxs)("label",{className:"flex items-center space-x-3 p-4 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,s.jsx)("input",{type:"radio",name:"voiceType",value:"default",checked:"default"===t.selectedVoiceType,onChange:()=>w("default"),className:"w-4 h-4 text-blue-600"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Use Default Voice"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Choose from pre-trained Replicate voices"})]})]}),(0,s.jsxs)("label",{className:"flex items-center space-x-3 p-4 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,s.jsx)("input",{type:"radio",name:"voiceType",value:"cloned",checked:"cloned"===t.selectedVoiceType,onChange:()=>w("cloned"),className:"w-4 h-4 text-blue-600"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Use My Cloned Voice"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Select from your saved voice clones"})]})]}),(0,s.jsxs)("label",{className:"flex items-center space-x-3 p-4 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,s.jsx)("input",{type:"radio",name:"voiceType",value:"clone-new",checked:"clone-new"===t.selectedVoiceType,onChange:()=>w("clone-new"),className:"w-4 h-4 text-blue-600"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Clone New Voice"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Upload audio to create a new voice clone"})]})]})]})}),"default"===t.selectedVoiceType&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900",children:"Default Voices"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map(e=>(0,s.jsxs)("button",{onClick:()=>{i({selectedVoiceId:e.id,selectedVoiceType:"default"})},className:`p-4 border-2 rounded-lg text-left transition-colors ${t.selectedVoiceId===e.id?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[(0,s.jsx)("div",{className:"font-semibold",children:e.name}),e.description&&(0,s.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:e.description}),e.gender&&(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:[e.gender," • ",e.accent||"Standard accent"]})]},e.id))})]}),"cloned"===t.selectedVoiceType&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900",children:"My Cloned Voices"}),0===n.length?(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,s.jsx)("p",{children:"No cloned voices yet."}),(0,s.jsx)("p",{className:"text-sm mt-2",children:'Select "Clone New Voice" to create one.'})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(e=>(0,s.jsxs)("button",{onClick:()=>{var s;return s=e.voiceName,void i({selectedVoiceId:e.replicateVoiceId,clonedVoiceName:s,selectedVoiceType:"cloned"})},className:`p-4 border-2 rounded-lg text-left transition-colors ${t.clonedVoiceName===e.voiceName?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[(0,s.jsx)("div",{className:"font-semibold",children:e.voiceName}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Used ",e.usageCount," time",1!==e.usageCount?"s":""]}),e.lastUsed&&(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:["Last used: ",new Date(e.lastUsed.toMillis()).toLocaleDateString()]})]},e.id))})]}),"clone-new"===t.selectedVoiceType&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900",children:"Clone New Voice"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Voice Name"}),(0,s.jsx)("input",{type:"text",value:v,onChange:e=>y(e.target.value),placeholder:"e.g., My Professional Voice",maxLength:50,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Choose a unique name for this voice clone (1-50 characters)"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Audio File"}),(0,s.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[(0,s.jsx)("input",{type:"file",accept:"audio/*",onChange:e=>{let s=e.target.files?.[0];if(s){if(!s.type.startsWith("audio/"))return void alert("Please select an audio file");if(s.size>0xa00000)return void alert("Audio file must be less than 10MB");b(s)}},className:"hidden",id:"audio-upload"}),(0,s.jsx)("label",{htmlFor:"audio-upload",className:"cursor-pointer block",children:g?(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:g.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[(g.size/1024/1024).toFixed(2)," MB"]})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Click to upload audio file"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Minimum 5 seconds • Max 10MB • MP3, WAV, or M4A"})]})})]})]}),(0,s.jsx)("button",{onClick:V,disabled:!g||!v.trim()||p,className:"w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Cloning Voice...":"Clone Voice"}),j&&(0,s.jsx)("div",{className:"text-sm text-blue-600 text-center",children:"Uploading and processing audio..."})]})]}),(0,s.jsx)("div",{className:"flex justify-end pt-6 border-t",children:(0,s.jsx)("button",{onClick:c,disabled:!("default"===t.selectedVoiceType?null!==t.selectedVoiceId:("cloned"===t.selectedVoiceType||"clone-new"===t.selectedVoiceType)&&null!==t.selectedVoiceId&&null!==t.clonedVoiceName),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next: Enter Script"})})]})}function c({videoData:e,state:t,updateState:i,onNext:c,onPrevious:o}){let[d,n]=(0,a.useState)("generate"),[x,m]=(0,a.useState)(""),[u,p]=(0,a.useState)(!1),[h,g]=(0,a.useState)(null),b=async()=>{if(!e.metadata)return void alert("Video metadata not available");try{p(!0);let s=(0,l.httpsCallable)(r.functions,"generateScript"),a=(await s({productName:e.metadata.productName||e.productName||"Product",productDescription:e.metadata.productDescription||"",brandTone:e.metadata.brandTone||e.brandTone||"professional",targetAudience:e.metadata.targetAudience,duration:e.metadata.duration||e.duration||7,variationCount:1,keywords:e.metadata.keywords||[],uniqueSellingPoints:e.metadata.uniqueSellingPoints||[]})).data;if(a.success&&a.scripts&&a.scripts.length>0){let e=a.scripts[0].script;g(e);let s=e.scenes.map(e=>e.dialogue).join(" ");i({script:s,scriptGenerated:!0}),m(s)}}catch(e){console.error("Error generating script:",e),alert(e.message||"Failed to generate script. Please try again.")}finally{p(!1)}},v=e=>{m(e),i({script:e,scriptGenerated:!1})};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Enter Script"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Generate a script with AI or write your own"}),(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,s.jsxs)("label",{className:"flex items-center space-x-3 p-4 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,s.jsx)("input",{type:"radio",name:"inputMode",value:"generate",checked:"generate"===d,onChange:()=>n("generate"),className:"w-4 h-4 text-blue-600"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Generate Script with AI"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Use viral hooks and AI to create an engaging script"})]})]}),(0,s.jsxs)("label",{className:"flex items-center space-x-3 p-4 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,s.jsx)("input",{type:"radio",name:"inputMode",value:"custom",checked:"custom"===d,onChange:()=>n("custom"),className:"w-4 h-4 text-blue-600"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Write Custom Script"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Write your own script text"})]})]}),(0,s.jsxs)("label",{className:"flex items-center space-x-3 p-4 border rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,s.jsx)("input",{type:"radio",name:"inputMode",value:"none",checked:"none"===d,onChange:()=>n("none"),className:"w-4 h-4 text-blue-600"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("span",{className:"font-semibold",children:"No Script (Music Only)"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Skip voiceover, add background music only"})]})]})]})}),"generate"===d&&(0,s.jsx)("div",{className:"space-y-4",children:t.scriptGenerated?(0,s.jsxs)("div",{className:"space-y-4",children:[h&&(0,s.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Generated Script"}),h.hook&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Hook:"}),(0,s.jsx)("p",{className:"text-gray-900",children:h.hook})]}),h.hookVariations&&h.hookVariations.length>0&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Hook Variations:"}),(0,s.jsx)("ul",{className:"list-disc list-inside space-y-1",children:h.hookVariations.map((e,a)=>(0,s.jsxs)("li",{className:"text-sm text-gray-700",children:[e.text," (Score: ",e.viralScore,"/10)"]},a))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Scenes:"}),(0,s.jsx)("div",{className:"space-y-2",children:h.scenes?.map(e=>(0,s.jsxs)("div",{className:"text-sm text-gray-700 border-l-2 border-blue-500 pl-3",children:[(0,s.jsxs)("p",{className:"font-medium",children:["Scene ",e.id," (",e.duration,"s):"]}),(0,s.jsx)("p",{children:e.dialogue})]},e.id))})]})]}),(0,s.jsx)("textarea",{value:x,onChange:e=>v(e.target.value),placeholder:"Edit the generated script or write your own...",rows:10,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[x.length," characters"]}),(0,s.jsx)("button",{onClick:b,disabled:u,className:"px-4 py-2 border border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 disabled:opacity-50",children:u?"Regenerating...":"Regenerate Script"})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{onClick:b,disabled:u,className:"w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:u?"Generating Script...":"Generate Script with Viral Hooks"}),e.metadata&&(0,s.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,s.jsx)("strong",{children:"Product:"})," ",e.metadata.productName||"N/A"]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,s.jsx)("strong",{children:"Tone:"})," ",e.metadata.brandTone||"professional"]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,s.jsx)("strong",{children:"Duration:"})," ",e.metadata.duration||7," seconds"]})]})]})}),"custom"===d&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("textarea",{value:x,onChange:e=>v(e.target.value),placeholder:"Write your script here... Make it engaging and clear.",rows:10,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[x.length," characters"]}),e.duration&&(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Recommended: ~",Math.round(2.5*e.duration)," characters for ",e.duration,"s video"]})]})]}),"none"===d&&(0,s.jsx)("div",{className:"p-6 bg-gray-50 rounded-lg text-center",children:(0,s.jsx)("p",{className:"text-gray-600",children:"No voiceover will be added. You can add background music in the composition step."})}),(0,s.jsxs)("div",{className:"flex justify-between pt-6 border-t",children:[(0,s.jsx)("button",{onClick:o,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Previous"}),(0,s.jsx)("button",{onClick:c,disabled:!("none"===d||("generate"===d?null!==t.script&&t.script.trim().length>0:"custom"===d&&x.trim().length>0)),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next: Preview"})]})]})}function o({state:e,updateState:t,onNext:i,onPrevious:c}){let[o,d]=(0,a.useState)(!1),[n,x]=(0,a.useState)(e.voiceoverPreviewUrl),[m,u]=(0,a.useState)(1),[p,h]=(0,a.useState)(null);(0,a.useEffect)(()=>{e.script&&e.selectedVoiceId&&!n&&g()},[]);let g=async()=>{if(!e.script||!e.selectedVoiceId)return void alert("Please select a voice and enter a script first");try{d(!0),h(null);let s=(0,l.httpsCallable)(r.functions,"generateReplicateVoiceover"),a=(await s({text:e.script,voiceType:"cloned"===e.selectedVoiceType||"clone-new"===e.selectedVoiceType?"cloned":"default",voiceId:e.selectedVoiceId,speed:m})).data;a.success&&(x(a.audioUrl),t({voiceoverPreviewUrl:a.audioUrl}))}catch(e){console.error("Error generating preview:",e),h(e.message||"Failed to generate voiceover preview")}finally{d(!1)}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Preview Voiceover"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Listen to your voiceover before finalizing"}),(0,s.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg",children:(0,s.jsx)("div",{className:"flex justify-between items-center",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:"cloned"===e.selectedVoiceType||"clone-new"===e.selectedVoiceType?`Cloned Voice: ${e.clonedVoiceName||"Unknown"}`:"Default Voice Selected"}),e.script&&(0,s.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Script: ",e.script.length," characters"]})]})})}),e.script&&(0,s.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Script Text:"}),(0,s.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:e.script})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Playback Speed: ",m,"x"]}),(0,s.jsx)("input",{type:"range",min:"0.5",max:"2.0",step:"0.1",value:m,onChange:e=>u(parseFloat(e.target.value)),className:"w-full"}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,s.jsx)("span",{children:"0.5x"}),(0,s.jsx)("span",{children:"1.0x"}),(0,s.jsx)("span",{children:"2.0x"})]})]}),n?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"p-6 bg-gray-50 rounded-lg",children:(0,s.jsx)("audio",{controls:!0,className:"w-full",src:n})}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("button",{onClick:()=>{x(null),g()},disabled:o,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:o?"Regenerating...":"Regenerate Preview"}),(0,s.jsx)("button",{onClick:g,disabled:o,className:"px-4 py-2 border border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 disabled:opacity-50",children:o?"Generating...":"Update Speed & Regenerate"})]})]}):(0,s.jsx)("div",{className:"text-center py-8",children:e.script?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Click below to generate a preview of your voiceover"}),(0,s.jsx)("button",{onClick:g,disabled:o,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:o?"Generating Preview...":"Generate Preview"})]}):(0,s.jsx)("p",{className:"text-gray-500",children:"No script entered. You can proceed without voiceover."})}),p&&(0,s.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,s.jsx)("p",{className:"text-red-800 text-sm",children:p})}),(0,s.jsxs)("div",{className:"flex justify-between pt-6 border-t",children:[(0,s.jsx)("button",{onClick:c,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Previous"}),(0,s.jsx)("button",{onClick:i,disabled:null===n&&null!==e.script,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next: Compose Video"})]})]})}function d({videoData:e,state:i,updateState:c,onPrevious:o}){let d=(0,t.useRouter)(),[n,x]=(0,a.useState)(!1),[m,u]=(0,a.useState)(null),[p,h]=(0,a.useState)(1),[g,b]=(0,a.useState)(1),[v,y]=(0,a.useState)(null),j=async()=>{if(!e.url)return void alert("Video URL not available");if(!i.voiceoverPreviewUrl&&i.script)return void alert("Please generate a voiceover preview first");try{x(!0),y(null);let s=i.script?i.voiceoverPreviewUrl:null,a=(0,l.httpsCallable)(r.functions,"composeVideoWithVoiceover"),t=(await a({videoUrl:e.url,voiceoverUrl:s,videoVolume:p,voiceoverVolume:g})).data;t.success&&(u(t.composedVideoUrl),c({voiceoverUrl:s}))}catch(e){console.error("Error composing video:",e),y(e.message||"Failed to compose video")}finally{x(!1)}},N=()=>{d.push("/generate/results")};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Compose Final Video"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Combine your video with voiceover"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900",children:"Video Preview"}),e.url?(0,s.jsx)("div",{className:"bg-black rounded-lg overflow-hidden",children:(0,s.jsx)("video",{src:e.url,controls:!0,className:"w-full"})}):(0,s.jsx)("div",{className:"bg-gray-100 rounded-lg p-12 text-center text-gray-500",children:"Video not available"})]}),i.script&&i.voiceoverPreviewUrl&&(0,s.jsxs)("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900",children:"Volume Controls"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Video Volume: ",Math.round(100*p),"%"]}),(0,s.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:p,onChange:e=>h(parseFloat(e.target.value)),className:"w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Voiceover Volume: ",Math.round(100*g),"%"]}),(0,s.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:g,onChange:e=>b(parseFloat(e.target.value)),className:"w-full"})]})]})]}),m?(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)("div",{className:"p-6 bg-green-50 border border-green-200 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-semibold text-green-900 mb-2",children:"✓ Video Composed Successfully!"}),(0,s.jsx)("p",{className:"text-green-700 text-sm mb-4",children:"Your video with voiceover is ready."}),(0,s.jsx)("div",{className:"bg-black rounded-lg overflow-hidden",children:(0,s.jsx)("video",{src:m,controls:!0,className:"w-full"})}),(0,s.jsxs)("div",{className:"flex space-x-4 mt-4",children:[(0,s.jsx)("a",{href:m,download:!0,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Download Video"}),(0,s.jsx)("button",{onClick:N,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Back to Results"})]})]})}):(0,s.jsxs)("div",{className:"space-y-4",children:[i.script?(0,s.jsx)("div",{className:"p-4 bg-blue-50 rounded-lg",children:(0,s.jsx)("p",{className:"text-sm text-gray-700",children:"Ready to combine your video with the voiceover. Click below to compose the final video."})}):(0,s.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg",children:(0,s.jsx)("p",{className:"text-sm text-gray-700",children:"No voiceover selected. The video will remain as-is."})}),(0,s.jsx)("button",{onClick:j,disabled:n,className:"w-full px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:n?"Composing Video...":i.script?"Compose Video with Voiceover":"Save Video"})]}),v&&(0,s.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,s.jsx)("p",{className:"text-red-800 text-sm",children:v})}),(0,s.jsxs)("div",{className:"flex justify-between pt-6 border-t",children:[(0,s.jsx)("button",{onClick:o,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Previous"}),m&&(0,s.jsx)("button",{onClick:N,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Finish"})]})]})}let n=[{id:1,name:"Select Voice",description:"Choose default voice or clone your own"},{id:2,name:"Enter Script",description:"Generate or write your script"},{id:3,name:"Preview",description:"Preview voiceover before finalizing"},{id:4,name:"Compose",description:"Combine video and voiceover"}];function x({videoId:e,videoData:t}){let[l,r]=(0,a.useState)({step:1,selectedVoiceType:null,selectedVoiceId:null,clonedVoiceName:null,script:null,scriptGenerated:!1,voiceoverUrl:null,voiceoverPreviewUrl:null}),x=()=>{l.step<n.length&&r(e=>({...e,step:e.step+1}))},m=()=>{l.step>1&&r(e=>({...e,step:e.step-1}))},u=e=>{r(s=>({...s,...e}))};return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:n.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center flex-1",children:[(0,s.jsx)("button",{onClick:()=>{var s;(s=e.id)<l.step&&r(e=>({...e,step:s}))},disabled:e.id>l.step,className:`flex items-center justify-center w-10 h-10 rounded-full font-semibold transition-colors ${e.id<l.step?"bg-green-500 text-white":e.id===l.step?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"} ${e.id<=l.step?"cursor-pointer hover:opacity-80":"cursor-not-allowed"}`,children:e.id<l.step?"✓":e.id}),a<n.length-1&&(0,s.jsx)("div",{className:`flex-1 h-1 mx-2 ${e.id<l.step?"bg-green-500":"bg-gray-200"}`})]},e.id))}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900",children:n[l.step-1]?.name}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:n[l.step-1]?.description})]})]}),(0,s.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-8",children:[1===l.step&&(0,s.jsx)(i,{videoData:t,state:l,updateState:u,onNext:x}),2===l.step&&(0,s.jsx)(c,{videoData:t,state:l,updateState:u,onNext:x,onPrevious:m}),3===l.step&&(0,s.jsx)(o,{videoData:t,state:l,updateState:u,onNext:x,onPrevious:m}),4===l.step&&(0,s.jsx)(d,{videoId:e,videoData:t,state:l,updateState:u,onPrevious:m})]})]})}function m(){let e=(0,t.useRouter)(),l=(0,t.useSearchParams)(),r=l.get("videoId"),[i,c]=(0,a.useState)(null),[o,d]=(0,a.useState)(!0),[n,m]=(0,a.useState)(null);return((0,a.useEffect)(()=>{if(!r){m("Video ID is required"),d(!1);return}(async()=>{try{let e=l.get("campaignId");if(e){let s=`campaign_${e}`,a=localStorage.getItem(s);if(a){let e=JSON.parse(a);c({id:r,url:"",productName:e.productName,brandTone:e.brandTone,duration:e.duration,metadata:e}),d(!1);return}}c({id:r,url:"",metadata:{}}),d(!1)}catch(e){console.error("Error loading video data:",e),m(e.message||"Failed to load video data"),d(!1)}})()},[r,l]),o)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n||!i?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Error"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:n||"Video not found"}),(0,s.jsx)("button",{onClick:()=>e.push("/generate/results"),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Back to Results"})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,s.jsx)("div",{className:"container mx-auto px-4",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("button",{onClick:()=>e.back(),className:"text-blue-600 hover:text-blue-700 mb-4",children:"← Back"}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Add Voiceover to Video"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Enhance your video with professional narration"})]}),r&&(0,s.jsx)(x,{videoId:r,videoData:i})]})})})}function u(){return(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),children:(0,s.jsx)(m,{})})}e.s(["default",()=>u],35474)},23223,e=>{e.v(s=>Promise.all(["static/chunks/5dad9ecc8a82d38d.js"].map(s=>e.l(s))).then(()=>s(12066)))},99259,e=>{e.v(e=>Promise.resolve().then(()=>e(39555)))}]);